
<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<title>you,cell</title>
	<link rel="stylesheet" href="jquery.ui/jquery-ui-1.8.23.custom.css"></link>
	<link rel="stylesheet" href="style.css"></link>
	<script src="jquery.js"></script>
	<script src="jquery.ui/jquery-ui-1.8.23.custom.min.js"></script>
	<script src="jquery.json.js"></script>
	<script src="cocos2d.js"></script>
	<script src="users.js"></script>
</head>
<body>

	
	
	<div style="position:absolute;">
		<canvas id="debugCanvas" style="display:none" width="2000" height="1000"></canvas>
	</div>
	<div id="stage" style="position:absolute;">
		<canvas id="gameCanvas" width="800" height="450"></canvas>
	</div>
	
	<!-- 蛋白质合成工厂 -->
	<div id="dialog-protein-composite" style="display:none">
		<h2>蛋白质工厂</h2>

		<div>
			原料
			<span style="color:red" class="aminoacid-num-red"></span>
			<span style="color:yellow" class="aminoacid-num-yellow"></span>
			<span style="color:blue" class="aminoacid-num-blue"></span>
		</div>
		
		<hr />
		
		<div>
			<div id="protein-formulas-outer"></div>
			<div id="protein-composition-formula-template" class="protein-formula" style="display:none;">
				
				<button onclick="ins(yc.inner.ProteinFormulas).toggle( $(this).parent().data('formula').name )" class='protein-formula-togglebtn' style="float:left">自动</button>
				<button onclick="" style="float:left">生产</button>
				<span class='formula-display' style="float:left;width:100px"></span>
				<span class="formula-msg" style="display:none">暂停</span>
				<div class="protein-composite-progress" style="width:150px;height:10px; float:left"></div>
				<div style="clear:both"></div>
			</div>
		</div>
		
		<div>
			<button onclick="$('#dialog-protein-composite').hide()" style="float:right">关闭</button>
		</div>
		
	</div>
	
	
	
	<div id="debug-output" style="float:right;position: absolute;width:400px">
		<div id="player-status"></div>
	</div>
	
	<div id='menu-inner-layer-zoom' style="float:right;position: absolute;">
		<button title="回到主菜单" onclick=" if(!confirm('确定要放弃当前游戏，退回到主菜单吗？')) return ; cc.Director.getInstance().replaceScene( ins(yc.levels.LevelSelector) )">主菜单</button>
	</div>
	
		
	
	
	<!-- 建造菜单 -->
	<div id="bulding-create-menu" class="bulding-menu" style="display:none;position:absolute ;">
	
		<div>
			<h3>建设</h3>
			<button class='btn-close'>关闭</button>
		</div>
		
		<div id='bulding-create-items' class='bulding-items'></div>
		
	</div>
	<div class="bulding-create" id="bulding-create-template" style='display:none'>
		<b class='title'></b>
		<div class='description'></div>
		<div class='cost'></div>
		<span class='message' style='color:red'></span>
		<button class='create'>购买</button>
	</div>
	
	<!-- 升级菜单 -->
	<div id="bulding-upgrade-menu" class="bulding-menu" style="display:none;position:absolute ;">
	
		<div>
			<h3>升级</h3>
			<button class='btn-close'>关闭</button>
		</div>
		
		<div id="bulding-upgraders-outer" class='bulding-items'></div>
		
		<hr />
		<div>
			<button id='btn-demolish'>拆除</button>
			可回收：<span id='cost-recovering'></span>
		</div>
	</div>
	
	<div class="bulding-upgrader" id="bulding-upgrader-template" style='display:none'>
		<b class='title'></b>
		<span class='newLv'>Lv </span>
		<div class='description'></div>
		<div class='detail'></div>
		<div class='cost'></div>
		<button class='upgrade'>Upgrade</button>
	</div>
	
	<!-- 击杀boss奖励菜单 -->
	<div id="dialog-killboss-reward" style="display:none">
		
		<h3>奖励</h3>
		
		<div>
			你成功击杀了Boss病毒，请选择一个基因作为奖励，然后进入下一个关卡。
		</div>
		
		<div id="reward-genes-outer"></div>
		
		<div id="reward-gene-template" style="display:none" class="reward-gene">
			<h4 class="title"></h4>
			<div class="description"></div>
			<button class='btn-select'>选择</button>
		</div>
	</div>
	
	<!-- 关卡编辑器 -->
	<div id='dlg-world-editer' style='display:none;font-size:12px;position:fixed;top:0px;left:40px'>
	
		<div id='worldediter-message'></div>
		
		<div id='tabs-world-editer'>
			<ul>
				<li><a href="#panel-world">世界</a></li>
				<li><a href="#panel-stains">地形</a></li>
				<li><a href="#panel-pinups">贴图</a></li>
				<li><a href="#panel-roles">角色</a></li>
			</ul>
			
			
			<div id='panel-world'>
				<div>
					世界范围
					Top<input id='ipt-world-top' style='width:40px' value='null' />
					Lft<input id='ipt-world-lft' style='width:40px' value='null' />
					Btm<input id='ipt-world-btm' style='width:40px' value='null' />
					Rgt<input id='ipt-world-rgt' style='width:40px' value='null' />
				</div>
				
				<div>
					
					<button onclick="yc.settings.outer.box2d.dbg=!yc.settings.outer.box2d.dbg; $('#debugCanvas').toggle()">Debug Draw</button>
					
					<label><input type="checkbox" onchange="yc.settings.player.nohurt=$(this).attr('checked')?true:false" checked />无敌</label>
					<label><input type="checkbox" onchange="yc.settings.player.stealth=$(this).attr('checked')?true:false" checked />隐身</label>
					<br />
					<button onclick="ins(yc.outer.Cell).spurt(100)">冲刺</button>
					x:<input value="" id='ipt-pos-x' style='width:40px' />
					y:<input value="" id='ipt-pos-y' style='width:40px' />
					<button onclick="ins(yc.outer.Cell).jump(parseInt($('#ipt-pos-x').val()),parseInt($('#ipt-pos-y').val()))">跃迁</button>
				</div>

				<div>
					<button onclick="cc.Director.getInstance()._runningScene.initWithScript(yc.GameScene.prototype.scriptDemo)">test</button>
				</div>

				<div>
					<button onclick="saveWorldToServer()">保存到服务器</button>
					<div id="saveWorldMsg"></div>
				</div>
			</div>
		
			<div id='panel-stains'>
				<button onclick="ins(yc.ui.editer.WorldEditer).stain.refreshStains()">刷新</button>
				<button onclick="ins(yc.ui.editer.WorldEditer).stain.createStain()">+ 污渍</button>
				<button onclick="ins(yc.ui.editer.WorldEditer).stain.removeStain()">- 污渍</button>
				| <label><input type="checkbox" onchange="yc.settings.outer.stain.dbg=$(this).attr('checked')?true:false" checked />debug info</label>
				<div>
					<div style="float:left;">
						污渍：<br />
						<select multiple=true size="22" id="lst-stains" style="width:120px"></select>
					</div>

					<div style="float:left; margin-left:20px">
						x:<input id='ipt-stain-x' style='width:70px' value='' />
						y:<input id='ipt-stain-y' style='width:70px' value='' />
						<br />

						<select id="sel-stain-bodyType">
							<option value='0'>静止</option>
							<option value='2'>可动</option>
						</select>

						角度： <input id='ipt-stain-rotation' style='width:60px' value='' /><br />
						
						<button onclick="ins(yc.ui.editer.WorldEditer).stain.locateStain()">定位</button>
						<button onclick="ins(yc.ui.editer.WorldEditer).stain.stopStainMoving()">停止移动</button>
						<button onclick="ins(yc.ui.editer.WorldEditer).stain.stopStainRotation()">停止旋转</button>

						<hr />

						<div>

							<b>形状：</b>
							<button onclick="ins(yc.ui.editer.WorldEditer).stain.createStainShape()">+ 形状</button>
							<button onclick="ins(yc.ui.editer.WorldEditer).stain.removeStainShape()">- 形状</button><br />
							<select multiple=true size="3" id="lst-stain-shapes" style="width:150px"></select><br />

							密度<input id='ipt-stain-shape-density' style='width:20px' value='' />
							弹性<input id='ipt-stain-shape-restitution' style='width:20px' value='' />
							摩擦<input id='ipt-stain-shape-friction' style='width:20px' value='' />
							<br />

							染色<input id='ipt-stain-shape-color' style='width:100px' value='' /><br />
							边界色<input id='ipt-stain-shape-border-color' style='width:100px' value='' /><br />
							

							文本<input id='ipt-stain-shape-text' style='width:150px' /><br />
							文本样式<input id='ipt-stain-shape-text-style' title="污渍上绘制文本的样式" style='width:120px' value='' /> <br />
							文本颜色<input id='ipt-stain-shape-text-color' title="污渍上绘制文本的颜色" style='width:100px' value='' /><br />
							贴图<input id="ipt-stain-shape-img" style='width:140px' value='' />

						</div>

						<hr />
						
						<div>
							<b>多边形顶点：</b>
							<button onclick="ins(yc.ui.editer.WorldEditer).stain.createStainPoint()">+ 点</button>
							<button onclick="ins(yc.ui.editer.WorldEditer).stain.removeStainPoint()">- 点</button>
							<br />
							<select multiple=true size="6" id="lst-stain-points" style="width:150px"></select><br />

							顶点坐标：<br />
							x:<input id='ipt-stain-point-x' style='width:50px' value='' />
							y:<input id='ipt-stain-point-y' style='width:50px' value='' />
							<button id="btn-stain-position" onclick="ins(yc.ui.editer.WorldEditer).stain.locateStainPoint()">定位</button>
							<br />
						</div>
					
						<div style="clear:both"></div>

					</div>

					<div style="clear:both"></div>
				</div>
			</div>
			
			
			
			<div id='panel-pinups'>
				<div style="float:left">
					前景层：
					<button onclick="ins(yc.ui.editer.WorldEditer).pinup.createPinup('foreground')">+</button>
					<button onclick="ins(yc.ui.editer.WorldEditer).pinup.removePinup('foreground')">-</button>
					<br />
					<select multiple=true size="7" id="lst-pinup-foreground" style="width:120px"></select>
					<br />
					
					背景层：
					<button onclick="ins(yc.ui.editer.WorldEditer).pinup.createPinup('background')">+</button>
					<button onclick="ins(yc.ui.editer.WorldEditer).pinup.removePinup('background')">-</button>
					<br />
					<select multiple=true size="7" id="lst-pinup-background" style="width:120px"></select>
					<br />
					
					远景层：
					<button onclick="ins(yc.ui.editer.WorldEditer).pinup.createPinup('perspective')">+</button>
					<button onclick="ins(yc.ui.editer.WorldEditer).pinup.removePinup('perspective')">-</button>
					<br />
					<select multiple=true size="7" id="lst-pinup-perspective" style="width:120px"></select>
				</div>			

				<div style="float:left;margin-left:20px">
					坐标 x:<input id='ipt-pinup-x' style='width:30px' value='' format="int" />
					y:<input id='ipt-pinup-y' style='width:30px' value='' format="int" />
					旋转:<input id='ipt-pinup-rotation' style='width:40px' value='' format="float" />
					<br />

					锚点 x:<input id='ipt-pinup-anchor-x' style='width:30px' value='' format="float" />
					y:<input id='ipt-pinup-anchor-y' style='width:30px' value='' format="float" />
					透明:<input id='ipt-pinup-opacity' style='width:40px' value='' format="int" />
					<br />

					缩放 x:<input id='ipt-pinup-scale-x' style='width:30px' value='' format="float" />
					y:<input id='ipt-pinup-scale-y' style='width:30px' value='' format="float" />
					<br />

					Img Url<input id='ipt-pinup-img-url' style='width:180px' value='' />
					<br />

					<label>
						<input id="ipt-pinup-tile" type="checkbox" />
						平铺
					</label>
					宽<input id="ipt-pinup-tile-width" style="width:40px" format="int" value="100" />
					高<input id="ipt-pinup-tile-height" style="width:40px" format="int" value="100" />
					<br />

					文本<input id='ipt-pinup-text' style='width:200px' value='' /><br />
					文本样式<input id='ipt-pinup-text-style' style='width:170px' value='' /><br />
					文本颜色<input id='ipt-pinup-text-color' style='width:70px' value='' /><br />

					<label style="margin-right:20px">
						<input id="ipt-pinup-mosey" type="checkbox" />“漫步”
					</label>
					速度(point/sec)<input id="ipt-pinup-mosey-speed" value="10" format="float" style="width:40px" />

					<br />
					视差：<input id="ipt-pinup-parallax" value="1" format="float" />
				</div>

				<div style="clear:both"></div>
			</div>

			
			<div id='panel-roles'>
				<div>
					
					<div style="float:left;" >
						<button onclick="ins(yc.ui.editer.WorldEditer).role.createAminoAcid()">+ ♪</button>
						<button onclick="ins(yc.ui.editer.WorldEditer).role.removeAminoAcid()">- ♪</button>
						<label>
							<input type="checkbox" checked onclick="yc.settings.outer.aminoacid.dbgInfo=!yc.settings.outer.aminoacid.dbgInfo" />dbg
						</label>
						<br />
						<select multiple=true size="10" id="lst-roles-aminoacid"  style="width:120px"></select>

					</div>

					<div id="props-aminoacid" style="float:left; margin-left:5px; margin-top:15px">
						类型:<select id="sel-aminoacid-type">
							<option value="red">red</option>
							<option value="yellow">yellow</option>
							<option value="blue">blue</option>
						</select>
						<br />
						数量：<input id="ipt-aminoacid-num" style="width:40px" format="int" />
						<br />
						坐标 x:<input id='ipt-aminoacid-x' style='width:30px' value='' format="int" />
						y:<input id='ipt-aminoacid-y' style='width:30px' value='' format="int" />
					</div>
					
					<div style="clear:both"></div>

				</div>

				<div>
					<div style="float:left;">
						<button onclick="ins(yc.ui.editer.WorldEditer).role.createVirusCluster()">+</button>
						<button onclick="ins(yc.ui.editer.WorldEditer).role.removeVirusCluster()">-</button>
						<label>
							<input type="checkbox" checked onclick="yc.settings.outer.virus.dbgInfo=!yc.settings.outer.virus.dbgInfo" />dbg
						</label>
						<br />
						<select multiple=true size="10" id="lst-roles-virusclusters"  style="width:120px"></select>
					</div>

					<div id="props-viruscluster" style="float:left; margin-left:5px; margin-top:15px">
						坐标 x:<input id='ipt-virusclusters-x' style='width:30px' value='' format="int" />
						y:<input id='ipt-virusclusters-y' style='width:30px' value='' format="int" />
					</div>
					
					<div style="clear:both"></div>
				</div>

			</div>

			<!-- <div id="panel-balance">
				<button onclick="ins(yc.ui.editer.WorldEditer).refreshSettings()">刷新</button>
				<ul id='ul-settings'></ul>
			</div> -->
			
		</div>
	</div>
	
	
	<!-- 场景：关卡选择 -->
	<div id="ui-levels-selector">
		<div id="ui-levels-selector-title">
			<h1>I, Cell</h1>
			<p>You are a cell under someone's microscope ……</p>
		</div>

		<div id="ui-levels-selector-login">

			<div>
				<a id="weibo_auth_login" href="service/sina_user/login.php">
					<img src="img/weibo_login.png" title="点击进入授权页面" alt="点击进入授权页面" border="0" width="119" height="24"/>
				</a>
			</div>
			<div>
				<a id="loginWithTestUser" href="#">
					TEST
				</a>
			</div>

		</div>

		
		<div id="ui-levels-selector-menu" class="">
			<ul>
				<li>
					<button onclick="$('#ui-levels-selector-menu,#ui-buildin-levels-menu').slideToggle();">故事模式</button>
				</li>
				<li>
					<button onclick="mapList()">探索模式</button>
					<!--<img src='http://ww1.sinaimg.cn/large/73b3a2a7gw1dxke15bzf3j.jpg'/>-->
				</li>
				<br />
				<li>
					<button onclick="cc.Director.getInstance().replaceScene( new yc.levels.FreeWorld ); $('#ui-levels-selector').toggle();">
						随机关卡
					</button>
				</li>
			</ul>
		</div>

		<div id="ui-buildin-levels-menu" style="display:none">
			<ul>
				<li>
					<button onclick="yc.levels.LevelSelector.enterLevel(yc.levels.c1.tutorial)">教学关卡</button>
				</li>
				<li>
					<button onclick="yc.levels.LevelSelector.enterLevel(yc.levels.c1.l1)">Lv 1</button>
				</li>
				<li>
					<button disabled>Lv 2</button>
				</li>
				<li>
					<button disabled>Lv 3</button>
				</li>
				<hr />
				<li>
					<button onclick="$('#ui-levels-selector-menu,#ui-buildin-levels-menu').slideToggle();">返回</button>
				</li>
			</ul>
		</div>

		<div id="mapListDiv">
			<div id="mapListDiv_title">
				<a id="mapListDiv_newMapBtn" href="#"  onclick="$('#mapListDiv').dialog('close');yc.levels.LevelSelector.enterLevel(yc.levels.creater)">Create my map</a>
				<h2>map list</h2>
			</div>
			<div id="mapListDiv_list">
			</div>
		</div>

	</div>
</body>
</html>